var connectionString = require('./connectionString'),
    log = require('../logger');

// determine various configuration information from environment such as web.config settings, etc.
module.exports = function (configuration) {
    configuration = configuration || {};
    Object.keys(process.env).forEach(function (key) {
        switch(key.toLowerCase()) {
            case 'ms_tableconnectionstring':
                log.debug('Setting table connection string from environment variable ' + key);
                configuration.data = connectionString.parse(process.env[key]);
                break;
        }
    });
    return configuration;
};
