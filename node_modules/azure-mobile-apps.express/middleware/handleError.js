module.exports = function (err, req, res, next) {
    res.status(500).json(JSON.stringify(normaliseError(err)));
};

function normaliseError(err) {
    if(!err)
        return {
            message: 'Unknown error'
        };

    if(err instanceof Error)
        return {
            message: err.message,
            stack: err.stack
        };

    if(err.constructor === String)
        return {
            message: err
        };

    return err;
}
