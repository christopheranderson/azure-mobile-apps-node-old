var express = require('express');

module.exports = function () {
    var router = express.Router(),
        result = function (req, res, next) {
            router(req, res, next);
        };
    
    result.add = function (name, definition) {
        if (definition.constructor === Function)
            definition = definition(name);
        
        // these paths should not be hard coded
        router.use('/' + name + '/:id', definition);
        router.use('/' + name, definition);
    };
    
    result.stack = router.stack;    

    return result;
}