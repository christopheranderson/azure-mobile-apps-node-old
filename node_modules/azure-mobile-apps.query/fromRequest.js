var Query = require('query.js').Query;

module.exports = function(req) {
    var url = req.baseUrl || req.path;
    return Query.Providers.OData.fromOData(
        url.substring(url.lastIndexOf('/') + 1),
        req.query.$filter,
        req.query.$orderby,
        parseInt(req.query.$skip),
        parseInt(req.query.$top),
        req.query.$select,
        req.query.$inlinecount === 'allpages')
}
