var expect = require('chai').expect;

describe('zumo.core.configurationLoader', function () {
    var loader = require('zumo.core/configurationLoader');
    
    it('loads configuration from single file and adds to target', function () {
        var configuration = {};
        loader.loadPath(configuration, './configuration/table1');
        expect(configuration).to.deep.equal({
            table1: { authenticate: true }
        });
    });

    it('loads configuration recursively from directory and adds to target', function () {
        var configuration = {};
        loader.loadPath(configuration, './configuration');
        expect(configuration).to.deep.equal({
            table1: { authenticate: true },
            table2: { authenticate: false },
            table3: { softDelete: true }
        });
    });

    it('loads files specified with .js extension', function () {
        var configuration = {};
        loader.loadPath(configuration, './configuration/table1.js');
        expect(configuration).to.deep.equal({
            table1: { authenticate: true }
        });
    });
});