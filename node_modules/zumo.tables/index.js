var configurationLoader = require('zumo.core/configurationLoader'),
    crudFactory = require('./crud');

module.exports = function (configuration) {
    configuration.tables = configuration.tables || {};
    
    crudFactory.add = function (tableNameOrPath, definition) {
        if (definition)
            configuration.tables[tableNameOrPath] = definition;
        else
            configurationLoader.loadPath(configuration.tables, tableNameOrPath, configuration.basePath);
    };

    return crudFactory;
}